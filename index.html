<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MetaRouter Test</title>

<script type='text/javascript'>
!(function() {
  
  var analytics = (window.analytics = window.analytics || [])
  if (!analytics.initialize) {
    if (analytics.invoked) {
      window.console && console.error && console.error('Analytics.js snippet included twice.')
    } else {
      analytics.invoked = !0
      analytics.methods = [
        'trackSubmit',
        'trackClick',
        'trackLink',
        'trackForm',
        'pageview',
        'identify',
        'reset',
        'group',
        'track',
        'ready',
        'alias',
        'debug',
        'page',
        'once',
        'off',
        'on',
        'addSourceMiddleware',
        'addIntegrationMiddleware',
        'setAnonymousId',
        'addDestinationMiddleware',
      ]
      analytics.factory = function(e) {
        return function() {
          var t = Array.prototype.slice.call(arguments)
          t.unshift(e)
          analytics.push(t)
          return analytics
        }
      }
      for (var e = 0; e < analytics.methods.length; e++) {
        var key = analytics.methods[e]
        analytics[key] = analytics.factory(key)
      }
      analytics.load = function(key, e) {
        var t = document.createElement('script')
        t.type = 'text/javascript'
        t.async = !0
        t.src = ("https:"===document.location.protocol?"https://":"http://")+"meta-ant.github.io/test_site/"+key+".js"
        var n = document.getElementsByTagName('script')[0]
        n.parentNode.insertBefore(t, n)
        analytics._loadOptions = e
      }
      analytics.SNIPPET_VERSION = '4.13.1'
      analytics.load("demo_anthony")
      window.analytics.page()
    }
  }
})()
</script>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      gap: 20px;
      padding: 20px;
    }
    .container {
      flex: 1;
    }
    .payload {
      flex: 1;
      background: #f4f4f4;
      padding: 20px;
      border-radius: 8px;
      white-space: pre-wrap;
      font-family: monospace;
    }
    select, button {
      margin-top: 10px;
      padding: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>MetaRouter Test Page</h1>

    <label for="eventSelect">Choose an event:</label>
    <select id="eventSelect" onchange="updatePayloadPreview()">
      <option value="User Signup">User Signup</option>
      <option value="Product Viewed">Product Viewed</option>
      <option value="Checkout Started">Checkout Started</option>
      <option value="Order Completed">Order Completed</option>
    </select>

    <button onclick="sendEvent()">Send Event</button>
  </div>

  <div class="payload" id="payloadDisplay">
    Event payload will appear here...
  </div>

  <!-- MetaRouter Snippet -->
  <script type="text/javascript">


    const eventProperties = {
      "User Signup": {
        category: "User",
        label: "Signup Button",
        plan: "Free"
      },
      "Product Viewed": {
        category: "Ecommerce",
        label: "Product Page",
        product_id: "SKU-12345"
      },
      "Checkout Started": {
        category: "Ecommerce",
        label: "Cart Page",
        cart_value: 99.99
      },
      "Order Completed": {
        category: "Ecommerce",
        label: "Confirmation Page",
        order_id: "ORD-98765",
        revenue: 149.99
      }
    };

    function updatePayloadPreview() {
      const eventName = document.getElementById('eventSelect').value;
      const properties = eventProperties[eventName];

      const payload = {
        type: 'track',
        event: eventName,
        properties: properties
      };

      document.getElementById('payloadDisplay').textContent = JSON.stringify(payload, null, 2);
    }

    function sendEvent() {
      const eventName = document.getElementById('eventSelect').value;
      const properties = eventProperties[eventName];
      analytics.track(eventName, properties);
    }

    // Initialize payload preview on load
    window.onload = updatePayloadPreview;
  </script>
  
</body>
</html>
